/* Zadarma Callme Widget v.2.0.9
 * For this widget version you may use language pack of any version
 */
!function(){this.ZadarmaCallmeWidget=function(e){var t=e;if(void 0===l)var l={};var a,o,c,n,i,r,d,m,s,u,_,p,g,h,f,v,b,w,M,E,y,I,T,z,C,N={shape:"circle",language:"en",dtmf:!1,dtmf_position:"top",dtmf_time_to_disappear:20,dtmf_auto_show:!0,color_call:"rgb(255, 255, 255)",color_bg_call:"rgb(126, 211, 33)",color_border_call:"rgb(191, 233, 144)",color_connection:"rgb(255, 255, 255)",color_bg_connection:"rgb(33, 211, 166)",color_border_connection:"rgb(144, 233, 211)",color_calling:"rgb(255, 255, 255)",color_bg_calling:"rgb(255, 181, 0)",color_border_calling:"rgb(255, 218, 128)",color_ended:"rgb(255, 255, 255)",color_bg_ended:"rgb(164,164,164)",color_border_ended:"rgb(210, 210, 210)",font:'"Trebuchet MS", "Helvetica CY", sans-serif',txt_greeting:"",txt_nowebrtc:"",widgetId:!1,sipId:!1,domain:!1},x=window.AudioContext||window.webkitAudioContext||!1,k=0,D="call",F=!1,B=function(){G.call(this)},A=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"==window.navigator.platform;function L(e){for(var t in e)el=e[t],"shape"==t&&"circle"!=el?N[t]="square":"dtmf"==t&&!0!==el?N[t]=!1:"dtmf_position"==t&&"right"!==el&&"bottom"!==el&&"left"!==el?N[t]="top":"dtmf_time_to_disappear"==t&&(el<=0||el!=parseInt(el,10))?N[t]=0:N[t]="width"==t?el.toString():el,""==N.language&&(N.language="en")}function S(){H.call(this),R.call(this)}function R(){s.addEventListener("mousedown",B,!1),u&&u.addEventListener("click",(function(){O.call(this)}),!1),p.addEventListener("click",(function(){"calling"==D&&G.call(this,"ended")}),!1),window.onbeforeunload=function(e){K.call(this)}}function O(e){!1!==N.dtmf&&(e&&"off"==e?(_.className=_.className.replace(/ callme-dtmf-numpad--opened/i,""),u.className=u.className.replace(/ callme__dtmf-ico--shown/i,""),clearTimeout(C)):e&&"on"==e?_.className.match(/ callme-dtmf-numpad--opened/i)||(_.className+=" callme-dtmf-numpad--opened",u.className+=" callme__dtmf-ico--shown"):_.className.match(/ callme-dtmf-numpad--opened/i)?(_.className=_.className.replace(/ callme-dtmf-numpad--opened/i,""),u.className=u.className.replace(/ callme__dtmf-ico--shown/i,""),clearTimeout(C)):(_.className+=" callme-dtmf-numpad--opened",u.className+=" callme__dtmf-ico--shown"))}function H(){s.style.visibility="hidden";var e="z-callme-widget";-1==s.className.split(" ").indexOf(e)&&(s.className+=" "+e);e="callme--"+N.shape;-1==s.className.split(" ").indexOf(e)&&(s.className+=" "+e);e="callme";-1==s.className.split(" ").indexOf(e)&&(s.className+=" "+e);e="callme--default";if(-1==s.className.split(" ").indexOf(e)&&(s.className+=" "+e),N.dtmf){e="callme--dtmf-"+N.dtmf_position;-1==s.className.split(" ").indexOf(e)&&(s.className+=" "+e)}(n=document.createElement("audio")).setAttribute("playsinline",!0),n.setAttribute("controls",!0),n.id="webRTCRemoteView_"+m,n.style.width="0px",n.style.display="none",n.style.height="0px",n.setAttribute("autoplay",!0),s.appendChild(n),(b=document.createElement("audio")).id="outgoingRing_"+m,b.setAttribute("src","https://my.zadarma.com/assets/out.wav"),b.setAttribute("preload","auto"),s.appendChild(b),document.getElementById("outgoingRing_"+m).load(),(w=document.createElement("audio")).id="buzyRing_"+m,w.setAttribute("src","https://my.zadarma.com/assets/busy.wav"),w.setAttribute("preload","auto"),s.appendChild(w),document.getElementById("buzyRing_"+m).load();var t=document.createElement("audio");t.id="hangup_"+m,t.setAttribute("src","https://my.zadarma.com/assets/hangup.wav"),t.setAttribute("preload","auto"),s.appendChild(t),document.getElementById("hangup_"+m).load();var a=document.createElement("div");a.className="callme__content",s.appendChild(a);var o=document.createElement("div");o.className="callme__icon",a.appendChild(o);var c=document.createElement("div");c.className="default-phone-ico",o.appendChild(c);var i=document.createElement("i");i.className="z-icon icon-default-phone-ico",c.appendChild(i);var r=document.createElement("div");r.className="callme__icon__text",r.innerHTML=l.call,c.appendChild(r);var f=document.createElement("div");f.className="connecting-phone-ico",o.appendChild(f);var v=document.createElement("i");v.className="z-icon icon-connecting-phone-ico",f.appendChild(v);var M=document.createElement("div");M.className="callme__icon__text",M.innerHTML=l.connection,f.appendChild(M);var E=document.createElement("div");E.className="done-ico",o.appendChild(E);var y=document.createElement("i");y.className="z-icon icon-done-ico",E.appendChild(y),(g=document.createElement("div")).className="callme__icon__text",g.innerHTML=l.ended,E.appendChild(g);var I=document.createElement("div");if(I.className="finish-phone-ico",o.appendChild(I),!0===N.dtmf)(p=document.createElement("i")).className="z-icon icon-finish-phone-ico",p.title=l.finishCall,I.appendChild(p);else{p=document.getElementById(m);var T=document.createElement("i");T.className="z-icon icon-finish-phone-ico",T.title=l.finishCall,I.appendChild(T)}if(p.style.cursor="pointer",(h=document.createElement("div")).className="z-callme-timer",h.innerHTML="00:00",I.appendChild(h),!0===N.dtmf){(u=document.createElement("div")).className="callme__dtmf-ico",u.title=l.dtmf;var z=document.createElement("i");z.className="z-icon icon-dtmf-phone-ico",u.appendChild(z),"circle"==N.shape?s.appendChild(u):I.appendChild(u),(_=document.createElement("div")).className="callme-dtmf-numpad",s.appendChild(_);var C=document.createElement("div");C.className="callme-dtmf-numpad__description",C.innerHTML=l.dtmf,_.appendChild(C);var x=document.createElement("ul");x.className="dtmf-numpad",_.appendChild(x);for(var k,D=Array(),F=0;F<=9;F+=1)10==(k=F+1)&&(k=0),D[F]=document.createElement("li"),D[F].id="DTMF"+k+"BTN"+m,D[F].className="dtmf-numpad__item",D[F].setAttribute("data-value",k),D[F].innerHTML=k,x.appendChild(D[F]);var B=document.createElement("audio");B.id="DTMF1"+m,B.setAttribute("src","https://my.zadarma.com/assets/dtmf-1.wav"),B.setAttribute("preload","auto"),s.appendChild(B),document.getElementById("DTMF1"+m).load(),document.getElementById("DTMF1BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF1"+m).play(),d.insertDTMF(1)}),!1);var A=document.createElement("audio");A.id="DTMF2"+m,A.setAttribute("src","https://my.zadarma.com/assets/dtmf-2.wav"),A.setAttribute("preload","auto"),s.appendChild(A),document.getElementById("DTMF2"+m).load(),document.getElementById("DTMF2BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF2"+m).play(),d.insertDTMF(2)}),!1);var L=document.createElement("audio");L.id="DTMF3"+m,L.setAttribute("src","https://my.zadarma.com/assets/dtmf-3.wav"),L.setAttribute("preload","auto"),s.appendChild(L),document.getElementById("DTMF3"+m).load(),document.getElementById("DTMF3BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF3"+m).play(),d.insertDTMF(3)}),!1);var S=document.createElement("audio");S.id="DTMF4"+m,S.setAttribute("src","https://my.zadarma.com/assets/dtmf-4.wav"),S.setAttribute("preload","auto"),s.appendChild(S),document.getElementById("DTMF4"+m).load(),document.getElementById("DTMF4BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF4"+m).play(),d.insertDTMF(4)}),!1);var R=document.createElement("audio");R.id="DTMF5"+m,R.setAttribute("src","https://my.zadarma.com/assets/dtmf-5.wav"),R.setAttribute("preload","auto"),s.appendChild(R),document.getElementById("DTMF5"+m).load(),document.getElementById("DTMF5BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF5"+m).play(),d.insertDTMF(5)}),!1);var O=document.createElement("audio");O.id="DTMF6"+m,O.setAttribute("src","https://my.zadarma.com/assets/dtmf-6.wav"),O.setAttribute("preload","auto"),s.appendChild(O),document.getElementById("DTMF6"+m).load(),document.getElementById("DTMF6BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF6"+m).play(),d.insertDTMF(6)}),!1);var H=document.createElement("audio");H.id="DTMF7"+m,H.setAttribute("src","https://my.zadarma.com/assets/dtmf-7.wav"),H.setAttribute("preload","auto"),s.appendChild(H),document.getElementById("DTMF7"+m).load(),document.getElementById("DTMF7BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF7"+m).play(),d.insertDTMF(7)}),!1);var W=document.createElement("audio");W.id="DTMF8"+m,W.setAttribute("src","https://my.zadarma.com/assets/dtmf-8.wav"),W.setAttribute("preload","auto"),s.appendChild(W),document.getElementById("DTMF8"+m).load(),document.getElementById("DTMF8BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF8"+m).play(),d.insertDTMF(8)}),!1);var Z=document.createElement("audio");Z.id="DTMF9"+m,Z.setAttribute("src","https://my.zadarma.com/assets/dtmf-9.wav"),Z.setAttribute("preload","auto"),s.appendChild(Z),document.getElementById("DTMF9"+m).load(),document.getElementById("DTMF9BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF9"+m).play(),d.insertDTMF(9)}),!1);var P=document.createElement("audio");P.id="DTMF0"+m,P.setAttribute("src","https://my.zadarma.com/assets/dtmf-0.wav"),P.setAttribute("preload","auto"),s.appendChild(P),document.getElementById("DTMF0"+m).load(),document.getElementById("DTMF0BTN"+m).addEventListener("click",(function(){document.getElementById("DTMF0"+m).play(),d.insertDTMF(0)}),!1)}e="callme--shown";-1==s.className.split(" ").indexOf(e)&&(s.className+=" "+e);var j=0;for(var F in o.children)j<parseInt(o.children[F].offsetWidth,10)&&(j=parseInt(o.children[F].offsetWidth,10));j=parseInt(j,10)+20,o.style.width=j+"px";var U=[];N.color_bg_call.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_call_hover="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_call_hover=N.color_call,N.color_border_call.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_call_hover="rgb("+Math.floor(.92*U[0])+", "+Math.floor(.92*U[1])+", "+Math.floor(.92*U[2])+")",N.color_bg_call.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_call_active="rgb("+Math.floor(.7*U[0])+", "+Math.floor(.7*U[1])+", "+Math.floor(.7*U[2])+")",N.color_call_active=N.color_call,N.color_border_call.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_call_active="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_bg_connection.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_connection_hover="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_connection_hover=N.color_connection,N.color_border_connection.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_connection_hover="rgb("+Math.floor(.92*U[0])+", "+Math.floor(.92*U[1])+", "+Math.floor(.92*U[2])+")",N.color_bg_connection.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_connection_active="rgb("+Math.floor(.7*U[0])+", "+Math.floor(.7*U[1])+", "+Math.floor(.7*U[2])+")",N.color_connection_active=N.color_connection,N.color_border_connection.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_connection_active="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_bg_calling.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_calling_hover="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_calling_hover=N.color_calling,N.color_border_calling.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_calling_hover="rgb("+Math.floor(.92*U[0])+", "+Math.floor(.92*U[1])+", "+Math.floor(.92*U[2])+")",N.color_bg_calling.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_calling_active="rgb("+Math.floor(.7*U[0])+", "+Math.floor(.7*U[1])+", "+Math.floor(.7*U[2])+")",N.color_calling_active=N.color_calling,N.color_border_calling.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_calling_active="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_bg_ended.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_ended_hover="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")",N.color_ended_hover=N.color_ended,N.color_border_ended.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_ended_hover="rgb("+Math.floor(.92*U[0])+", "+Math.floor(.92*U[1])+", "+Math.floor(.92*U[2])+")",N.color_bg_ended.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_bg_ended_active="rgb("+Math.floor(.7*U[0])+", "+Math.floor(.7*U[1])+", "+Math.floor(.7*U[2])+")",N.color_ended_active=N.color_ended,N.color_border_ended.split(",").forEach((function(e,t){U[t]=parseInt(e.replace(/[^0-9]+/gi,""),10)})),N.color_border_ended_active="rgb("+Math.floor(.85*U[0])+", "+Math.floor(.85*U[1])+", "+Math.floor(.85*U[2])+")";var J=".z-callme-widget.callme.callme--square .callme__icon__text{font-family: "+N.font+";}.z-callme-widget.callme.callme--default {cursor:pointer;}.z-callme-widget.callme.callme--default .callme__content {background: "+N.color_bg_call+";box-shadow: 0 0 0 6px "+N.color_border_call+";}.z-callme-widget.callme.callme--default .callme__icon {color: "+N.color_call+";}.z-callme-widget.callme.callme--default .callme__content:hover {background: "+N.color_bg_call_hover+";box-shadow: 0 0 0 6px "+N.color_border_call_hover+";}.z-callme-widget.callme.callme--default .callme__content:hover .callme__icon {color: "+N.color_call_hover+";}.z-callme-widget.callme.callme--default .callme__content:active {background: "+N.color_bg_call_active+";box-shadow: 0 0 0 6px "+N.color_border_call_active+";}.z-callme-widget.callme.callme--default .callme__content:active .callme__icon {color: "+N.color_call_active+";}.z-callme-widget.callme.callme--connecting {cursor:pointer;}.z-callme-widget.callme.callme--connecting .callme__content {background: "+N.color_bg_connection+";box-shadow: 0 0 0 6px "+N.color_border_connection+";}.z-callme-widget.callme.callme--connecting .callme__icon {color: "+N.color_connection+";}.z-callme-widget.callme.callme--connecting .callme__content:hover {background: "+N.color_bg_connection_hover+";box-shadow: 0 0 0 6px "+N.color_border_connection_hover+";}.z-callme-widget.callme.callme--connecting .callme__content:hover .callme__icon {color: "+N.color_connection_hover+";}.z-callme-widget.callme.callme--connecting .callme__content:active {background: "+N.color_bg_connection_active+";box-shadow: 0 0 0 6px "+N.color_border_connection_active+";}.z-callme-widget.callme.callme--connecting .callme__content:active .callme__icon {color: "+N.color_connection_active+";}.z-callme-widget.callme.callme--speaking .callme__content {background: "+N.color_bg_calling+";box-shadow: 0 0 0 6px "+N.color_border_calling+";}.z-callme-widget.callme.callme--speaking .callme__icon {color: "+N.color_calling+";}"+("circle"==N.shape?".z-callme-widget.callme.callme--speaking {cursor:pointer;}.z-callme-widget.callme.callme--speaking .callme__content:hover {background: "+N.color_bg_calling_hover+";box-shadow: 0 0 0 6px "+N.color_border_calling_hover+";}.z-callme-widget.callme.callme--speaking .callme__content:hover .callme__icon {color: "+N.color_calling_hover+";}.z-callme-widget.callme.callme--speaking .callme__content:active {background: "+N.color_bg_calling_active+";box-shadow: 0 0 0 6px "+N.color_border_calling_active+";}.z-callme-widget.callme.callme--speaking .callme__content:active .callme__icon {color: "+N.color_calling_active+";}":".z-callme-widget.callme.callme--speaking {pointer:default;}")+".z-callme-widget.callme.callme--finished {cursor:pointer;}.z-callme-widget.callme.callme--finished .callme__content {background: "+N.color_bg_ended+";box-shadow: 0 0 0 6px "+N.color_border_ended+";}.z-callme-widget.callme.callme--finished .callme__icon {color: "+N.color_ended+";}.z-callme-widget.callme.callme--finished .callme__content:hover {background: "+N.color_bg_ended_hover+";box-shadow: 0 0 0 6px "+N.color_border_ended_hover+";}.z-callme-widget.callme.callme--finished .callme__content:hover .callme__icon {color: "+N.color_ended_hover+";}.z-callme-widget.callme.callme--finished .callme__content:active {background: "+N.color_bg_ended_active+";box-shadow: 0 0 0 6px "+N.color_border_ended_active+";}.z-callme-widget.callme.callme--finished .callme__content:active .callme__icon {color: "+N.color_ended_active+';}.z-callme-widget.callme{width:auto;}.z-callme-widget.callme.callme--speaking [class^="icon-"],.z-callme-widget.callme.callme--speaking [class*="icon-"]{ color:'+N.color_calling+'}.z-callme-widget.callme.callme--speaking [class^="icon-"]:hover,.z-callme-widget.callme.callme--speaking [class*="icon-"]:hover{ color:'+N.color_calling_hover+'}.z-callme-widget.callme.callme--speaking [class^="icon-"]:active,.z-callme-widget.callme.callme--speaking [class*="icon-"]:active{ color:'+N.color_calling_active+"}.icon-finish-phone-ico{cursor:pointer;}",q=document.createElement("style");q.type="text/css",q.styleSheet?q.styleSheet.cssText=J:q.appendChild(document.createTextNode(J)),s.appendChild(q)}function W(){var e=window.MediaStream;void 0===e&&"undefined"!=typeof webkitMediaStream&&(e=webkitMediaStream),void 0===e||"stop"in e.prototype||(e.prototype.stop=function(){this.getAudioTracks().forEach((function(e){e.stop()}))}),G.call(this,"ended")}function Z(){c=new x,i=!1!==c&&c.createGain();var e=document.createElement("script");e.src="https://api.zadarma.com/sys/webrtc/create_callId.php?jsonpCallback="+t+".setCallId&widgetId="+N.widgetId+"&sipId="+N.sipId+"&language="+N.language+"&url="+encodeURI(document.location.href).replace("#","%23"),s.appendChild(e)}function P(){var e=document.getElementById("hangup_"+m).play();void 0!==e&&e.catch((function(){console.error("User browser disabled autoplaying media - no ringing.")})).then((function(){}))}function j(){var e=document.getElementById("buzyRing_"+m).play();void 0!==e&&e.catch((function(){console.error("User browser disabled autoplaying media - no ringing.")})).then((function(){}))}function U(){document.getElementById("buzyRing_"+m).pause(),document.getElementById("buzyRing_"+m).currentTime=0}function J(){clearInterval(v),document.getElementById("outgoingRing_"+m).pause(),document.getElementById("outgoingRing_"+m).currentTime=0}function q(){clearInterval(v),v=setInterval((function(){var e=document.getElementById("outgoingRing_"+m).play();void 0!==e&&e.catch((function(){console.error("User browser disabled autoplaying media - no ringing.")})).then((function(){}))}),3e3)}function G(e){if(J.call(this),U.call(this),!0!==F){var t=D;e?"ended"==e?D="ended":"call"==e?D="call":"calling"==e&&(s.removeEventListener("click",B,!1),D="calling"):"call"==D?(Z.call(this),D="connection"):"connection"==D?(D="ended",M="none"):"ended"==D&&(D="call"),"calling"==D?s.removeEventListener("mousedown",B,!1):(s.removeEventListener("mousedown",B,!1),s.addEventListener("mousedown",B,!1)),t!=D&&V.call(this,t)}else console.error("Wrong parameters of Zadarma callme widget.")}function V(e){clearTimeout(E);var t="";"call"==D?t="callme--default":"connection"==D?t="callme--connecting":"calling"==D?(Q.call(this),t="callme--speaking",!0===N.dtmf&&(O.call(this,"on"),N.dtmf_time_to_disappear>0&&(C=setTimeout((function(){O.call(this,"off")}),1e3*N.dtmf_time_to_disappear)))):"ended"==D&&(t="callme--finished",X.call(this),"calling"==e||M&&"none"==M?(g.innerHTML=l.ended,P.call(this),K.call(this)):(g.innerHTML=l.buzy,j.call(this)),O.call(this,"off")),"call"==e?s.className=s.className.replace(/callme--default/i,t):"connection"==e?s.className=s.className.replace(/callme--connecting/i,t):"calling"==e?s.className=s.className.replace(/callme--speaking/i,t):"ended"==e&&(s.className=s.className.replace(/callme--finished/i,t)),E=setTimeout((function(){M=""}),1e3)}function Y(){o.on("connected",(function(e){k=0,s.style.visibility="visible"})),o.on("disconnected",(function(e){var t=N.domain;k+=1,o.stop(),clearTimeout(a),k<5?a=setTimeout((function(){ee.call(this,1,t)}),4e3):console.error("Zadarma servers are unable at this moment. Try to connect later.")})),o.on("newRTCSession",(function(e){(r=e.session).on("confirmed",(function(e){if(G.call(this,"calling"),r.connection.getReceivers().length>0){var t=r.connection.getReceivers()[0].track,l=new MediaStream;t&&(l.addTrack(t),te(l))}else r.connection.getRemoteStreams().length>0&&te(r.connection.getRemoteStreams()[0]);r.connection.getSenders?d=r.connection.getSenders()[0].dtmf:r.connection.createDTMFSender&&(d=r.connection.createDTMFSender(r.connection.getSenders()[0].getAudioTracks()[0]))})),r.on("progress",(function(e){183==e.response.status_code&&!1!==c&&-1==navigator.userAgent.search(/Firefox/)?J.call(this):q.call(this),-1!=navigator.userAgent.search(/Firefox/)&&(e.response.data=null,e.response.body=null)})),r.on("ended",(function(){W.call(this)})),r.on("failed",(function(e){W.call(this)})),r.on("addstream",(function(e){n.srcObject=e.stream,n.onloadedmetadata=function(e){n.play()}}))}))}function K(){r&&r.status&&8!=r.status&&r.terminate()}function Q(){z=Math.ceil($.call(this)/1e3),y=setInterval((function(){var e=Math.ceil($.call(this)/1e3);I=(e-z)%60,T=Math.floor((e-z)/60),h.innerHTML=(T<10?"0":"")+T+":"+(I<10?"0":"")+I}),1e3)}function X(){clearInterval(y),h.innerHTML="00:00"}function $(){return+new Date}function ee(e,l){var a=document.createElement("script");a.src="https://api.zadarma.com/sys/webrtc/get_callmebutton_data.php?jsonpCallback="+t+".zadarmaCallback&widgetId="+N.widgetId+"&sipId="+N.sipId+"&language="+N.language+(1==e?"&reconnect=1"+(l?"&domain="+l:""):""),s.appendChild(a)}function te(e){if(n.srcObject=e,n.onloadedmetadata=function(e){n.play(),!1===A&&(n.muted=!0)},!1!==c){var t=c.createMediaStreamSource(n.srcObject);!1===A&&(t.connect(i),i.gain.setValueAtTime(1,c.currentTime),i.connect(c.destination))}}ZadarmaCallmeWidget.prototype.setCallId=function(e){!0!==F&&(f=e.callId,o.call("sip:"+N.sipId+"@"+N.domain,{mediaConstraints:{audio:!0,video:!1},pcConfig:{rtcpMuxPolicy:"negotiate"},extraHeaders:["callid:"+f,"widgetid: "+N.widgetId,"language: "+("ua"==N.language?"ru":N.language)]}).connection.addEventListener("addstream",(function(e){te(e.stream)})))},ZadarmaCallmeWidget.prototype.create=function(e,l){N.widgetId=e.widgetId,N.sipId=e.sipId,m=e.domElement,L.call(this,l),s=document.getElementById(m);var a=document.createElement("script");a.src="https://api.zadarma.com/sys/webrtc/check_widget_status.php?jsonpCallback="+t+".zadarmaCreate&widgetId="+N.widgetId+"&sipId="+N.sipId+"&language="+N.language,s.appendChild(a)},ZadarmaCallmeWidget.prototype.zadarmaCreate=function(e){void 0===l.call&&(l=e.texts),N.txt_greeting=e.txt_greeting,N.txt_nowebrtc=e.txt_nowebrtc,!1===function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var l=e.indexOf("rv:");return parseInt(e.substring(l+3,e.indexOf(".",l)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}()&&DetectRTC.isWebRTCSupported?"https:"!=document.location.protocol?(s.innerHTML=N.txt_nowebrtc,console.error("You are trying to use Zadarma Callme Widget with http:// protocol site.")):(""!=N.txt_greeting&&(l.call=N.txt_greeting),e&&e.status&&1==e.status?(s.style.opacity=0,S.call(this),s.style.opacity=1,ee.call(this)):(s.innerHTML=N.txt_nowebrtc,console.error("Zadarma Callme Widget is switched off or not exists"))):(s.innerHTML=N.txt_nowebrtc,console.error("Zadarma Callme Widget is not supported by your browser"))},ZadarmaCallmeWidget.prototype.zadarmaCallback=function(e){if(e&&e.domain){N.domain=e.domain,N.username=e.username,N.pass=e.pass,JsSIP.C.USER_AGENT="Zadarma CallmeButton Widget";var t={sockets:[new JsSIP.WebSocketInterface("wss://"+N.domain+":4443")],uri:"sip:"+N.username+"@"+e.domain,display_name:N.username,password:N.pass,register:!1};(o=new JsSIP.UA(t)).start(),Y.call(this)}else F=!0}}}();